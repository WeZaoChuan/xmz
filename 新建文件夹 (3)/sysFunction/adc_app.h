#ifndef __ADC_APP_H_
#define __ADC_APP_H_

#include "stdint.h"
#include "mydefine.h"

// ADC??????ŽG??
typedef struct {
    uint32_t timestamp;  // ??????????
    uint32_t adc_value;  // ADC???
    float voltage;       // ????
} AdcDataRecord;

// ??????????
#define MAX_ADC_RECORDS 1000  // ?????????
extern volatile uint8_t adc_record_flag;     // ?????????
extern volatile uint8_t adc_print_flag;     // ?????????
extern AdcDataRecord adc_data_buffer[MAX_ADC_RECORDS];  // ?????????
extern volatile uint16_t adc_record_count;  // ??????????

// ADC DMA»º³åÇøÉùÃ÷
extern __IO uint32_t adc_val_buffer[2048];  // ADC DMA»º³åÇø

// ??§Ü???????
void adc_task(void);
void dac_sin_init(void);
void adc_dma_init(void);
void adc_tim_dma_init(void);

// ????????????
void adc_start_recording(void);
void adc_stop_recording(void);
void adc_save_data_to_sd(void);
void adc_print_data_from_sd(void);

#endif /* __ADC_APP_H_ */

